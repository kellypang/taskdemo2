# Dev Postgres profile - override via env vars if needed
spring.datasource.driverClassName=org.postgresql.Driver
# Prefer externally provided SPRING_DATASOURCE_URL. If absent, default to localhost with the
# PG_HOST_PORT value (standardized across all components) falling back to 55432 (mapped host port).
# This ensures consistency with test-all.sh and docker-compose configuration.
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:${PG_HOST_PORT:55432}/devdb}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:devuser}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:devpass}
# Use validate if schema applied externally; switch to update for iterative prototyping
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Enhanced logging for PostgreSQL connection and exception debugging (reduced verbosity)
logging.level.org.springframework.jdbc=INFO
logging.level.org.hibernate.SQL=INFO
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.level.org.postgresql=INFO
logging.level.uk.gov.hmcts=DEBUG
logging.level.com.zaxxer.hikari=INFO

# Flyway configuration for PostgreSQL
spring.flyway.enabled=false
# Flyway baseline configuration (uncomment if you want to use migrations)
# spring.flyway.baseline-on-migrate=true
# spring.flyway.baseline-version=1
# spring.flyway.locations=classpath:db/migration

# Exception details in responses for debugging - ENHANCED for full stack traces
server.error.include-exception=true
server.error.include-stacktrace=always
server.error.include-message=always
server.error.include-binding-errors=always